{
  "annotations": { "list": [] },
  "title": "Go Fiber API Metrics - Live",
  "schemaVersion": 36,
  "version": 1,
  "timezone": "browser",
  "panels": [
    {
      "type": "timeseries",
      "title": "Peticiones por minuto por endpoint",
      "datasource": "Prometheus",
      "targets": [
        {
          "expr": "sum by(path, method)(rate(http_requests_total{path!=\"/metrics\"}[1m])) * 60",
          "legendFormat": "{{method}} {{path}}",
          "refId": "A"
        }
      ],
      "fieldConfig": { "defaults": { "unit": "req/s" } },
      "options": { "tooltip": { "mode": "all" } }
    },
    {
      "type": "timeseries",
      "title": "Latencia media por endpoint (segundos)",
      "datasource": "Prometheus",
      "targets": [
        {
          "expr": "rate(http_request_duration_seconds_sum{path!=\"/metrics\"}[1m]) / rate(http_request_duration_seconds_count{path!=\"/metrics\"}[1m])",
          "legendFormat": "{{method}} {{path}}",
          "refId": "B"
        }
      ],
      "fieldConfig": { "defaults": { "unit": "s" } },
      "options": { "tooltip": { "mode": "all" } }
    },
    {
      "type": "timeseries",
      "title": "Errores por minuto por endpoint",
      "datasource": "Prometheus",
      "targets": [
        {
          "expr": "sum by(path, status_code)(rate(http_requests_total{path!=\"/metrics\", status_code=~\"4..|5..\"}[1m])) * 60",
          "legendFormat": "{{path}} {{status_code}}",
          "refId": "C"
        }
      ],
      "fieldConfig": { "defaults": { "unit": "req/s" } },
      "options": { "tooltip": { "mode": "all" } }
    }
  ]
}
